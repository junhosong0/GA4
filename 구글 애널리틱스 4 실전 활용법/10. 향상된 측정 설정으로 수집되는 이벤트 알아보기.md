# 향상된 측정 설정으로 수집되는 이벤트 알아보기

GA4는 기본 페이지뷰 이벤트 외에도 서비스에서 발생하는 **일부 상호작용**을 이벤트로 자동 수집합니다. 

어떤 이벤트가 자동 수집되며, 수집 과정에서 별도의 추가 세팅이 필요하진 않은지 알아보자.


## 데이터 스트림 생성 시 일부 이벤트 자동 수집

관리 -> 속성설정 -> 데이터 수집 -> 데이터 스트

![image](https://github.com/junhosong0/GA4/assets/117610783/82838571-0365-482d-bab7-7409c5f06892)

페이지 조회 이벤트 외에 추가로 수집되는 이벤트 목록은 총 6개

#### 스크롤(Scroll)

페이지 접속 후 페이지 전체 세로 길이의 90% 이상 스크롤 했을 때 발생하는 이벤트. 특정 방문자가 페이지 스크롤에 오직 90%이상 도달해야지만 스크롤 이벤트가 발생.

스크롤 이벤트는 향상된 측정 기능으로 자동 수집하지 않고, 별도의 태그를 생성해서 스크롤 비율에 대한 값까지 같이 수집하기를 권장.

대신 이벤트 수집 과정에서 스크롤 정도를 수집하기 위한 매개변수(parameter) 이름을 **percent_scrolled**로 세팅해라. 왜냐면 자동으로 수집되는 스크롤 이벤트의 매개변수 이름을 보면 페이지 스크롤 90%에 도달했을 때 해당 이름으로 스크롤 비율 값을 수집하기 때문.
해당 매개변수를 나중에 GA4에서 측정기준(dimension)으로 활용하려면 반드시 맞춤 측정기준(Custom Dimension)으로 등록해줘야 함. 그렇지 않으면 GA4에서 수집한 **스크롤 정도** 값을 보고서에 활용할 수 없음.

![image](https://github.com/junhosong0/GA4/assets/117610783/1d835c5f-4d6b-4ca2-a75f-32d7f2954e69)


GTM을 활용해 스크롤 이벤트 별도 수집.

GTM의 **태그** 메뉴로 접속, **새로 만들기** 버튼 클릭.

![image](https://github.com/junhosong0/GA4/assets/117610783/5cf96ad2-57f3-46e1-850f-460fb52e1d3d)


태그 유형은 아래와 같이 GA4 이벤트 유형으로 선택. 이벤트 수집 드리븐이기 때문에 GA4 관련 태그 유형은 **기본 구성 태그**와 **이벤트 태그** 이렇게 두가지만 존재.

![image](https://github.com/junhosong0/GA4/assets/117610783/a167e5ef-6290-4113-b163-915d46de1fda)


태그 이름을 **GA4-Event-scroll**로 명명. 태그 이름은 최대한 일관성 있게 지어주는게 데이터 관리 및 유지보수를 위해 좋음. 처음에 GA4로 데이터 수집을 하기 위해 생성한 기본 구성 태그를 선택하거나, 기본 구성 태그를 생성하지 않았다면 데이터 스트림의 측정 ID를 넣어야 함. 그리고 이벤트 이름은 **scroll**로 입력. 자동으로 수집되는 이벤트 이름과 동일하게 맞추기 위해 대소문자 역시 동일하게 세팅.

![image](https://github.com/junhosong0/GA4/assets/117610783/3cf767b4-0fb7-4814-a24d-10b211a84851)


이벤트 매개변수에 **percent_scrolled**를 추가하고 값에 **{{Scroll Depth Threshold}}** 변수를 넣어줌. 참고로 해당 매개변수는 **스크롤 비율** 이라는 측정기준으로 GA4에서 활용할 수 있음. 변수를 넣을때 중괄호 2번 입력하면 선택 가능한 변수 목록이 뜸. 만약 여기에 해당 변수가 없다면 **변수** 메뉴로 가서 스크롤  관련 변수를 활성화해주면 됨. 스크롤 관련 변수 종류는 3가지, **기본 제공 변수 구성** 목록에서 활성화 가능.

![image](https://github.com/junhosong0/GA4/assets/117610783/ae270220-7913-405f-8200-755f8b52be68)



태그 설정 했으니 태그에 적용할 트리거 생성. 트리거 이름음 **Scroll tracking - All pages**로 명명. 트리거 유형 **스크롤 깊이**를 선택 **세로 스크롤 깊이** 체크 박스에 체크한 뒤 비율에 스크롤 정도를 수집하고자 하는 값을 넣어줌. 페이지 전체 세로 길이의 **25%**가 지날 때마다 스크롤 이벤트가 수집되도록 **25,50,75,90**을 입력. 너무 많은 이벤트를 수집하기 보다 4구간으로 수집하는걸 권장. **모든 페이지**에서 스크롤 이벤트를 수집하고 싶다면 모든 페이지 라디오 버튼을 체크, 틀정 페이지에서만 수집하고 싶다면 **일부 페이지**를 선택 후 조건을 넣어 줌.

![image](https://github.com/junhosong0/GA4/assets/117610783/51a0ffe3-9bc5-4b53-bcdc-475125846764)


세팅이 완료 되었음. GTM의 **미리보기** 모드를 켜고 미리보기 창과 GA4구성 메뉴의 **DebugView**에서 스크롤 이벤트가 정상적으로 잡히는지 QA를 진행함. 검증 후 이상이 없다면 GTM 컨테이너를 제출하고 GA4 스크롤 이벤트 트래킹 설정을 완료.



#### 이탈 클릭(Outbound clicks)

방문자가 접속 후 다른 도메인으로 가는 링크를 클릭할 때 트래킹되며 수집되는 이벤트명은 **click**임. **웹 스트림 세부정보**의 추가 설정 섹션의 **태그 설정 더보기** 메뉴에서 도메인 구성 설정에 추가된 외부 도메인이 아니라면, 기본적으로 외부 도메인 링크 클릭 시 모두 이벤트로 잡힘. 예를 들어 abc.com이라는 도메인 안에서 def.com 도메인으로 이동하는 링크를 클릭하는 경우 이탈 클릭 이벤트가 수집 됨. 이벤트가 수집되면서 같이 수집되는 매개변수는 다음과 같음.
- link_classes (클릭 시 HTML 속성 class 값)
- link domain (클릭된 링크의 도메인)
- link_id (클릭 시 HTML 속성 ID 값)
- link_url (클릭 URL)




